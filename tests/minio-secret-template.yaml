apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: minio-secret
objects:
- apiVersion: v1
  kind: Secret
  metadata:
    name: thanos-s3
    namespace: ${NAMESPACE}
  stringData:
    thanos.yaml: |
      type: s3
      config:
        bucket: thanos
        endpoint: minio.${MINIO_NAMESPACE}.svc.cluster.local:9000
        insecure: true
        access_key: minio
        secret_key: minio123
  type: Opaque
- apiVersion: v1
  kind: Secret
  metadata:
    name: s3
    namespace: ${NAMESPACE}
  data:
    aws_access_key_id: bWluaW8=
    aws_secret_access_key: bWluaW8xMjM=
  type: Opaque
parameters:
- name: NAMESPACE
  value: observatorium-metrics
- name: MINIO_NAMESPACE
  value: minio
